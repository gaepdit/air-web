@page
@using AirWeb.AppServices.Compliance.WorkEntries.Search
@model IndexModel
@{
    ViewData["Title"] = "Air Branch Web Application";
}

<vc:notifications />

@if (!Model.ShowDashboard)
{
    <h1>@ViewData["Title"]</h1>
    <p>See your manager to request access to the application.</p>
}
else
{
    <h1>@ViewData["Title"] â€” User Dashboard</h1>
}

@if (Model.IsComplianceStaff)
{
    <h2>Compliance Staff Work</h2>

    <div class="card mt-4">
        <div class="card-header">
            <h2 class="h5">Compliance work</h2>
            <div><em>Most recent open compliance work assigned to you</em></div>
        </div>
        <div class="card-body">
            @if (Model.ComplianceWork.TotalCount > 0)
            {
                <partial name="Shared/CompliancePartials/_WorkEntrySearchTable" model="(Model.ComplianceWork.Items, (WorkEntrySearchDto?)null)" />
            }
            else
            {
                @:None
            }
        </div>
    </div>

    <div class="card mt-4">
        <div class="card-header">
            <h2 class="h5">Enforcement cases</h2>
            <div><em>Most recent open enforcement cases assigned to you</em></div>
        </div>
        <div class="card-body">
            @if (Model.CaseFiles.TotalCount > 0)
            {
                <partial name="Shared/CompliancePartials/_CaseFileSearchTable" model="Model.CaseFiles.Items"
                         view-data="new ViewDataDictionary(ViewData)" view-data-HideStaff="true" />
            }
            else
            {
                @:None
            }
        </div>
    </div>

    // Source tests assigned
}

@if (Model.IsComplianceManager)
{
    <h2>Compliance Management Work</h2>

    <div class="card mt-4">
        <div class="card-header">
            <h2 class="h5">Office compliance work</h2>
            <div><em>Most recent open compliance work assigned to your office</em></div>
        </div>
        <div class="card-body">
            @if (Model.OfficeComplianceWork.TotalCount > 0)
            {
                <partial name="Shared/CompliancePartials/_WorkEntrySearchTable" model="(Model.OfficeComplianceWork.Items, (WorkEntrySearchDto?)null)" />
            }
            else
            {
                @:None
            }
        </div>
    </div>

    // Office source tests assigned
}

@if (Model.IsEnforcementReviewer)
{
    <h2>Enforcement Management Work</h2>

    <div class="card mt-4">
        <div class="card-header">
            <h2 class="h5">Office enforcement cases</h2>
            <div><em>Most recent open enforcement cases assigned to your office</em></div>
        </div>
        <div class="card-body">
            @if (Model.OfficeCaseFiles.TotalCount > 0)
            {
                <partial name="Shared/CompliancePartials/_CaseFileSearchTable" model="Model.OfficeCaseFiles.Items" />
            }
            else
            {
                @:None
            }
        </div>
    </div>
}
